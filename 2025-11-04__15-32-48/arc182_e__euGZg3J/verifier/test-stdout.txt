
======== SOLUTION.PY CONTENT ========
import sys
from math import gcd

def solve():
    N, M, C, K = map(int, input().split())
    A = list(map(int, input().split()))

    if C == 0:
        # When C = 0, all values are just A_i mod M
        # The minimum is constant for all K iterations
        min_val = min(A)
        print(min_val * K)
        return

    # When C != 0, we need to find the cycle
    # The sequence repeats with period = M / gcd(C, M)
    period = M // gcd(C, M)

    # Limit period to avoid TLE
    period = min(period, K)

    # Compute minimums for one complete period
    minimums = []
    for k in range(period):
        min_val = min((C * k + a) % M for a in A)
        minimums.append(min_val)

    total = 0

    if period >= K:
        # Period is larger than K, just sum directly
        for k in range(K):
            total += minimums[k]
    else:
        # We have a repeating cycle
        cycle_sum = sum(minimums)
        full_cycles = K // period
        remainder = K % period

        total = full_cycles * cycle_sum
        for k in range(remainder):
            total += minimums[k]

    print(total)

solve()

======== END OF SOLUTION.PY CONTENT ========

Input: 2 5 3 3
1 3

(stdin test) PASSED public_test_1 (test time: 0.07s)
Input: 5 4 3 182
0 3 2 1 2

(stdin test) PASSED public_test_2 (test time: 0.01s)
Input: 5 718 651 193855
3 532 44 109 58

(stdin test) PASSED public_test_3 (test time: 0.02s)
Input: 2 5 2 28
2 2

(stdin test) PASSED private_test_1 (test time: 0.07s)
Input: 99996 999999673 600009526 706824744
334992891 554965020 473360722 534212815 866963160 470554976 4570...
(stdin test) FAILED private_test_2: Subprocess timed out after 30 seconds
Input: 100000 701408733 433494437 1000000000
0 551883089 175689098 498471006 664001062 13516888 284001900 1...
(stdin test) FAILED private_test_3: Subprocess timed out after 30 seconds
Input: 99996 999999105 236106371 819793142
314539149 580895855 100386781 274599182 580557391 588509363 1444...
(stdin test) FAILED private_test_4: Subprocess timed out after 30 seconds
Input: 99997 999999025 889132433 842395162
795015641 89719414 618669664 529718974 360117276 733813105 38754...
(stdin test) FAILED private_test_5: Subprocess timed out after 30 seconds
Input: 99999 999999461 189130648 503470888
676598678 459857797 898653534 345087612 610072385 910432451 4079...
(stdin test) FAILED private_test_6: Subprocess timed out after 30 seconds
Input: 13 707770988 518909327 146652590
415698615 560380907 653789329 294782757 544857577 43248921 70161727...
(stdin test) FAILED private_test_7: Subprocess timed out after 30 seconds
Input: 1 1000000000 0 1000000000
999999999

(stdin test) PASSED private_test_8 (test time: 0.01s)
Input: 73139 939050163 375643453 724132381
421312112 885713725 747257811 527202673 726744568 576779165 6236...
(stdin test) FAILED private_test_9: Subprocess timed out after 30 seconds
Input: 5228 156326578 43211126 226418109
4719092 118950904 137939568 7283574 109377468 133200378 14065401 1...
(stdin test) FAILED private_test_10: Subprocess timed out after 30 seconds
Input: 22609 489080505 413087487 607809573
138736474 149550608 279405233 469729705 153279326 18422832 12899...
(stdin test) FAILED private_test_11: Subprocess timed out after 30 seconds
Input: 99996 999999327 49341644 217588836
887928262 756645166 542386859 975161251 194342860 935524006 91199...
(stdin test) FAILED private_test_12: Subprocess timed out after 30 seconds
Input: 1 5 2 13
1

(stdin test) PASSED private_test_13 (test time: 0.07s)
Input: 75848 739020313 10854943 508673531
346188048 542381512 215302995 229016425 382518688 26204515 287610...
(stdin test) FAILED private_test_14: Subprocess timed out after 30 seconds
Input: 5 61244988 39337507 563916936
49749514 44084789 5412711 47455373 43319103

(stdin test) FAILED private_test_15: Subprocess timed out after 30 seconds
Input: 53327 935377883 260531042 388928855
170362961 472360648 71827489 674312596 829167420 594391115 62811...


======== SOLUTION.PY CONTENT ========
from typing import List, Dict, Set, Tuple, Optional, Union, Any
import sys
from collections import deque

MOD = 998244353

def solve():
    n = int(input())
    balls = []
    for i in range(n):
        x, y = map(int, input().split())
        balls.append((x, y, i))  # x, y, original index

    # BFS to find all reachable states
    initial_state = frozenset(range(n))  # all ball indices
    visited_states = {initial_state}
    queue = deque([initial_state])

    while queue:
        current_state = queue.popleft()

        # Try each ball as the chosen ball
        for k_idx in current_state:
            x_k, y_k, _ = balls[k_idx]

            # Calculate which balls would be removed
            balls_to_remove = set()
            for i_idx in current_state:
                if i_idx == k_idx:
                    continue
                x_i, y_i, _ = balls[i_idx]

                # Remove if dominated by k or dominates k
                if (x_i < x_k and y_i < y_k) or (x_i > x_k and y_i > y_k):
                    balls_to_remove.add(i_idx)

            # Create new state
            if balls_to_remove:
                new_state = frozenset(current_state - balls_to_remove)
                if new_state not in visited_states:
                    visited_states.add(new_state)
                    queue.append(new_state)

    print(len(visited_states) % MOD)

solve()

======== END OF SOLUTION.PY CONTENT ========

Input: 3
1 3
2 1
3 2
(stdin test) PASSED public_test_1 (test time: 0.05s)
Input: 4
4 2
2 1
3 3
1 4
(stdin test) PASSED public_test_2 (test time: 0.03s)
Input: 4
2 1
3 2
1 3
4 4
(stdin test) PASSED private_test_1 (test time: 0.06s)
Input: 7
2 3
5 5
3 2
6 6
4 7
7 4
1 1
(stdin test) PASSED private_test_2 (test time: 0.03s)
Input: 131
31 110
61 47
124 111
125 87
127 40
42 45
53 64
122 83
49 105
20 17
40 86
57 80
14 84
68 39
86 63...
(stdin test) FAILED private_test_3: Subprocess timed out after 30 seconds
Input: 6
1 2
6 5
4 4
5 6
2 1
3 3
(stdin test) PASSED private_test_4 (test time: 0.06s)
Input: 3
3 1
2 3
1 2
(stdin test) PASSED private_test_5 (test time: 0.03s)
Input: 242
41 31
217 183
156 224
73 70
125 105
5 206
37 100
104 228
169 219
74 148
128 21
220 231
89 69
47 ...
(stdin test) FAILED private_test_6: Subprocess timed out after 30 seconds
Input: 2
2 2
1 1
(stdin test) PASSED private_test_7 (test time: 0.08s)
Input: 1
1 1
(stdin test) PASSED private_test_8 (test time: 0.03s)
Input: 5
1 5
2 4
3 3
4 2
5 1
(stdin test) PASSED private_test_9 (test time: 0.08s)
Input: 25
25 25
24 24
23 23
22 22
21 21
20 20
19 19
18 18
17 17
16 16
15 15
14 14
13 13
12 12
11 11
10 10
9...
(stdin test) PASSED private_test_10 (test time: 0.03s)
Input: 6
1 5
6 3
4 6
2 4
5 1
3 2
(stdin test) PASSED private_test_11 (test time: 0.08s)
Input: 254
107 68
247 129
238 19
204 54
7 61
75 82
90 137
183 223
23 97
102 40
152 32
192 253
245 201
39 43...
(stdin test) FAILED private_test_12: Subprocess timed out after 30 seconds
Input: 38
4 38
29 11
24 6
14 20
34 8
26 10
35 34
12 33
11 15
23 35
21 25
3 36
10 28
30 32
31 22
2 17
28 14
...
(stdin test) PASSED private_test_13 (test time: 0.19s)
Input: 6
2 5
5 3
1 6
6 1
4 4
3 2
(stdin test) PASSED private_test_14 (test time: 0.03s)
Input: 10
3 9
4 4
8 6
7 3
10 2
6 1
1 10
5 7
9 5
2 8
(stdin test) PASSED private_test_15 (test time: 0.08s)
Input: 15
7 12
13 11
10 9
15 6
9 7
8 5
4 10
5 15
12 14
14 8
6 2
1 4
2 1
11 13
3 3
(stdin test) PASSED private_test_16 (test time: 0.08s)
Input: 150
15 54
45 119
26 104
132 86
32 4
102 62
144 11
37 19
85 121
127 47
113 33
106 1
38 100
147 129
63...
(stdin test) FAILED private_test_17: Subprocess timed out after 30 seconds
Input: 4
4 3
3 1
2 4
1 2
(stdin test) PASSED private_test_18 (test time: 0.08s)
Input: 72
14 54
15 10
37 29
72 30
56 56
31 34
16 72
69 43
49 39
40 28
53 65
42 14
45 36
38 12
63 52
70 1
32...
(stdin test) PASSED private_test_19 (test time: 1.52s)
Input: 74
71 53
65 74
73 65
54 6
51 42
66 66
60 40
16 69
64 50
56 54
58 48
40 32
7 20
63 8
34 28
30 68
4 22...
(stdin test) PASSED private_test_20 (test time: 1.07s)
Input: 9
7 5
1 6
3 4
5 3
9 1
8 7
6 2
2 8
4 9
(stdin test) PASSED private_test_21 (test time: 0.03s)
Input: 10
9 4
8 2
1 1
2 8
6 5
10 6
7 3
3 9
4 7
5 10
(stdin test) PASSED private_test_22 (test time: 0.03s)
Input: 294
261 175
155 13
222 38
244 146
215 242
62 15
274 20
33 280
263 91
3 235
281 227
142 110
209 183
1...
(stdin test) FAILED private_test_23: Subprocess timed out after 30 seconds
Input: 8
7 6
5 4
3 7
2 8
1 1
6 5
4 3
8 2
(stdin test) PASSED private_test_24 (test time: 0.02s)
Input: 2
1 2
2 1
(stdin test) PASSED private_test_25 (test time: 0.03s)
Input: 1
1 1
(stdin test) PASSED private_test_26 (test time: 0.02s)
Input: 3
3 2
1 1
2 3
(stdin test) PASSED private_test_27 (test time: 0.02s)
Input: 248
53 228
48 245
155 214
201 235
71 49
238 136
50 242
138 204
14 141
166 140
34 91
123 247
243 153
...
(stdin test) FAILED private_test_28: Subprocess timed out after 30 seconds
Input: 9
7 8
3 3
4 5
9 7
2 2
5 4
6 6
1 1
8 9
(stdin test) PASSED private_test_29 (test time: 0.03s)
Input: 126
121 59
122 89
116 46
108 125
14 71
112 63
6 119
68 75
46 55
59 21
3 82
120 116
69 115
51 93
95 2...
(stdin test) FAILED private_test_30: Subprocess timed out after 30 seconds
Input: 2
1 1
2 2
(stdin test) PASSED private_test_31 (test time: 0.02s)
Input: 12
1 9
2 8
7 12
5 3
6 4
9 11
10 1
12 5
4 2
3 10
8 6
11 7
(stdin test) PASSED private_test_32 (test time: 0.02s)
Input: 3
2 3
3 1
1 2
(stdin test) PASSED private_test_33 (test time: 0.09s)
Input: 88
49 54
6 35
20 37
83 72
15 36
32 49
43 17
29 67
87 46
50 70
81 9
71 47
39 73
66 44
65 63
53 4
5 64...
(stdin test) FAILED private_test_34: Subprocess timed out after 30 seconds
Input: 236
38 104
189 2
37 103
120 67
133 13
113 114
47 221
232 40
197 92
132 139
147 98
115 148
224 232
15...
(stdin test) FAILED private_test_35: Subprocess timed out after 30 seconds
Input: 20
1 1
2 2
3 3
4 4
5 5
6 6
7 7
8 8
9 9
10 10
11 11
12 12
13 13
14 14
15 15
16 16
17 17
18 18
19 19
2...
(stdin test) PASSED private_test_36 (test time: 0.08s)
Input: 2
1 2
2 1
(stdin test) PASSED private_test_37 (test time: 0.03s)
Input: 7
7 4
5 1
3 5
6 2
2 3
4 7
1 6
(stdin test) PASSED private_test_38 (test time: 0.08s)
Input: 5
4 5
3 1
2 3
1 4
5 2
(stdin test) PASSED private_test_39 (test time: 0.08s)
Input: 249
98 229
8 22
95 130
158 232
45 29
224 246
80 216
227 182
212 93
238 90
55 221
88 61
228 7
151 46
...
(stdin test) FAILED private_test_40: Subprocess timed out after 30 seconds
=========================== short test summary info ============================
FAILED private_test_3
FAILED private_test_6
FAILED private_test_12
FAILED private_test_17
FAILED private_test_23
FAILED private_test_28
FAILED private_test_30
FAILED private_test_34
FAILED private_test_35
FAILED private_test_40
========================= 10 failed, 32 passed in 0.01s =========================

‚ùå TASK FAILED: 10 out of 42 tests failed!

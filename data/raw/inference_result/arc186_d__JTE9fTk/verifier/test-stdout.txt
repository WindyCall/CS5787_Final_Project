
======== SOLUTION.PY CONTENT ========
def solve():
    MOD = 998244353
    N = int(input())
    A = list(map(int, input().split()))

    memo = {}

    def count_polish(pos, tight, need_seqs):
        """
        Count Polish sequences that:
        - Fill positions [pos, N)
        - Are <= A[pos:] if tight
        - Represent exactly need_seqs complete Polish sequences from this point

        Returns count of valid ways.
        """
        # Base cases
        if need_seqs == 0:
            # We've satisfied all sequence demands - we must be at end
            return 1 if pos == N else 0

        if pos >= N:
            # Ran out of positions but still need sequences
            return 0

        key = (pos, tight, need_seqs)
        if key in memo:
            return memo[key]

        result = 0
        max_val = A[pos] if tight else N - 1

        # At position pos, we place value v which means:
        # - We start one Polish sequence with v sub-sequences
        # - We still need (need_seqs - 1) more sequences after this one completes
        for v in range(max_val + 1):
            new_tight = tight and (v == A[pos])

            # After placing v at pos, we need:
            # 1. v sub-sequences starting at pos+1
            # 2. Then (need_seqs - 1) more sequences

            # The recursive call handles parsing those v sequences
            # and then the remaining (need_seqs - 1) sequences
            ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
            result = (result + ways) % MOD

        memo[key] = result
        return result

    # Start by needing 1 Polish sequence to fill the entire array
    return count_polish(0, True, 1)

print(solve())

======== END OF SOLUTION.PY CONTENT ========

Input: 6
1 1 1 2 0 0
(stdin test) PASSED public_test_1 (test time: 0.01s)
Input: 11
3 3 4 4 5 5 6 6 7 7 8
(stdin test) PASSED public_test_2 (test time: 0.02s)
Input: 19
18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
(stdin test) PASSED public_test_3 (test time: 0.04s)
Input: 4
1 1 0 0
(stdin test) PASSED public_test_4 (test time: 0.01s)
Input: 10
3 4 0 3 9 2 1 5 8 2
(stdin test) PASSED private_test_1 (test time: 0.01s)
Input: 5
4 4 4 4 4
(stdin test) PASSED private_test_2 (test time: 0.01s)
Input: 59
8 49 28 42 7 35 9 31 22 22 29 8 12 15 33 34 39 26 37 51 57 23 26 58 1 34 5 30 17 45 3 19 8 17 42 ...
(stdin test) PASSED private_test_3 (test time: 1.43s)
Input: 7
0 1 2 4 6 1 2
(stdin test) PASSED private_test_4 (test time: 0.02s)
Input: 6
1 1 1 2 0 0
(stdin test) PASSED private_test_5 (test time: 0.01s)
Input: 64
47 60 33 51 18 11 24 24 32 19 31 51 5 23 63 3 8 28 27 15 52 8 30 48 28 18 28 15 42 62 51 30 5 52 ...
(stdin test) PASSED private_test_6 (test time: 2.58s)
Input: 1
0
(stdin test) PASSED private_test_7 (test time: 0.01s)
Input: 19
18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18
(stdin test) PASSED private_test_8 (test time: 0.04s)
Input: 1
0
(stdin test) PASSED private_test_9 (test time: 0.02s)
Input: 14
9 12 6 5 10 2 8 6 1 10 1 6 10 0
(stdin test) PASSED private_test_10 (test time: 0.02s)
Input: 13
8 7 8 1 6 0 3 8 4 5 4 8 3
(stdin test) PASSED private_test_11 (test time: 0.01s)
Input: 13
1 1 8 0 6 7 2 7 10 11 9 6 7
(stdin test) PASSED private_test_12 (test time: 0.02s)
Input: 3
1 0 0
(stdin test) PASSED private_test_13 (test time: 0.01s)
Input: 5
4 3 2 1 0
(stdin test) PASSED private_test_14 (test time: 0.02s)
Input: 4
2 2 2 0
(stdin test) PASSED private_test_15 (test time: 0.01s)
Input: 1000
27 413 33 764 552 841 926 146 298 176 180 859 653 281 161 206 423 91 63 507 135 569 960 128 875...
(stdin test) FAILED private_test_16: Solution crashed with error: Traceback (most recent call last):
  File "/app/solution.py", line 54, in <module>
    print(solve())
          ^^^^^^^
  File "/app/solution.py", line 52, in solve
    return count_polish(0, True, 1)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 994 more times]
  File "/app/solution.py", line 36, in count_polish
    for v in range(max_val + 1):
             ^^^^^^^^^^^^^^^^^^
RecursionError: maximum recursion depth exceeded in comparison
 (test time: 0.02s)
Input: 5
0 0 0 0 0
(stdin test) PASSED private_test_17 (test time: 0.01s)
Input: 52
38 47 10 20 23 24 22 24 33 27 47 19 2 1 40 9 41 10 40 17 34 2 38 20 31 34 19 23 2 6 42 4 10 13 6 ...
(stdin test) PASSED private_test_18 (test time: 0.84s)
Input: 4
2 2 2 0
(stdin test) PASSED private_test_19 (test time: 0.01s)
Input: 52
4 15 4 15 7 14 25 16 9 25 45 23 9 17 15 10 1 17 46 17 20 45 3 47 7 4 32 8 30 38 12 28 14 32 51 33...
(stdin test) PASSED private_test_20 (test time: 0.83s)
Input: 7
3 2 2 4 0 5 2
(stdin test) PASSED private_test_21 (test time: 0.01s)
Input: 5
0 1 2 3 4
(stdin test) PASSED private_test_22 (test time: 0.01s)
Input: 78
67 60 70 47 70 43 35 22 31 7 12 13 45 3 67 7 55 59 12 49 28 25 9 73 32 27 32 38 74 45 18 51 44 16...
(stdin test) PASSED private_test_23 (test time: 5.44s)
Input: 11
5 10 1 2 3 3 0 9 10 4 3
(stdin test) PASSED private_test_24 (test time: 0.02s)
Input: 4
1 1 0 0
(stdin test) PASSED private_test_25 (test time: 0.01s)
Input: 2
0 1
(stdin test) PASSED private_test_26 (test time: 0.01s)
Input: 75
66 45 69 68 67 67 19 48 73 41 52 64 29 57 45 43 31 36 63 40 38 14 66 64 16 40 74 55 37 72 66 30 4...
(stdin test) PASSED private_test_27 (test time: 4.66s)
Input: 5
4 4 1 1 3
(stdin test) PASSED private_test_28 (test time: 0.01s)
Input: 1000
236 175 546 373 704 452 187 174 966 935 274 579 562 842 815 22 3 293 168 987 232 22 632 44 115 ...
(stdin test) FAILED private_test_29: Solution crashed with error: Traceback (most recent call last):
  File "/app/solution.py", line 54, in <module>
    print(solve())
          ^^^^^^^
  File "/app/solution.py", line 52, in solve
    return count_polish(0, True, 1)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 994 more times]
  File "/app/solution.py", line 36, in count_polish
    for v in range(max_val + 1):
             ^^^^^^^^^^^^^^^^^^
RecursionError: maximum recursion depth exceeded in comparison
 (test time: 0.02s)
Input: 10
4 9 9 1 2 2 5 7 3 3
(stdin test) PASSED private_test_30 (test time: 0.02s)
Input: 1
0
(stdin test) PASSED private_test_31 (test time: 0.01s)
Input: 66
36 52 59 62 38 10 46 53 23 32 48 48 11 14 15 35 48 22 23 47 7 41 57 48 28 15 33 58 11 1 59 18 0 3...
(stdin test) PASSED private_test_32 (test time: 2.89s)
Input: 6
3 0 3 1 0 3
(stdin test) PASSED private_test_33 (test time: 0.01s)
Input: 10
3 0 1 1 1 3 7 9 7 9
(stdin test) PASSED private_test_34 (test time: 0.02s)
Input: 11
3 3 4 4 5 5 6 6 7 7 8
(stdin test) PASSED private_test_35 (test time: 0.02s)
Input: 83
57 19 49 56 22 13 26 82 36 74 3 71 6 79 66 77 28 7 9 22 22 54 23 60 23 19 61 55 32 56 25 81 22 32...
(stdin test) PASSED private_test_36 (test time: 6.85s)
Input: 1000
191 466 435 255 948 516 656 459 542 605 409 145 632 419 798 540 988 585 677 733 285 709 92 424 ...
(stdin test) FAILED private_test_37: Solution crashed with error: Traceback (most recent call last):
  File "/app/solution.py", line 54, in <module>
    print(solve())
          ^^^^^^^
  File "/app/solution.py", line 52, in solve
    return count_polish(0, True, 1)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/solution.py", line 45, in count_polish
    ways = count_polish(pos + 1, new_tight, v + (need_seqs - 1))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 994 more times]
  File "/app/solution.py", line 36, in count_polish
    for v in range(max_val + 1):
             ^^^^^^^^^^^^^^^^^^
RecursionError: maximum recursion depth exceeded in comparison
 (test time: 0.02s)
Input: 11
10 10 9 2 5 8 5 6 2 5 5
(stdin test) PASSED private_test_38 (test time: 0.02s)
Input: 13
2 1 9 11 12 0 0 1 4 4 2 10 3
(stdin test) PASSED private_test_39 (test time: 0.02s)
Input: 7
0 2 0 1 2 1 5
(stdin test) PASSED private_test_40 (test time: 0.02s)
=========================== short test summary info ============================
FAILED private_test_16
FAILED private_test_29
FAILED private_test_37
========================= 3 failed, 41 passed in 0.01s =========================

‚ùå TASK FAILED: 3 out of 44 tests failed!
